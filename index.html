<!DOCTYPE html>
<html lang="en-US">
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>No Nut November Calculator</title>
  </head>
  <style>
    body{
      background-color:#fed;
      color:#052;
      text-align:center;
      font-size:500%;
    }
  </style>
  <body>
   <script>
     function refreshData()
      {
        var date = new Date;
        date.setTime(date.getTime());

        var seconds = date.getSeconds();
        var minutes = date.getMinutes();
        var hour = date.getHours();

        var year = date.getFullYear();
        var month = date.getMonth();
        var day = date.getDate();
        if(month == 11){
          document.body.innerHTML = '<h2>It\'s over!</h2>'
        }
        else if(month < 10){
          document.body.innerHTML = '<h2>Waiting for November...</h2>'
          var numDaysLeft = 1-day;
          if(month < 10){
            numDaysLeft += 31;
            if(month < 9){
              numDaysLeft += 30;
              if(month < 8){
                numDaysLeft += 31;
                if(month < 7){
                  numDaysLeft += 31;
                  if(month < 6){
                    numDaysLeft += 30;
                    if(month < 5){
                      numDaysLeft += 31;
                      if(month < 4){
                        numDaysLeft += 30;
                        if(month < 3){
                          numDaysLeft += 31;
                          if(month < 2){
                            numDaysLeft += 28;
                            if(year % 4 == 0){
                              numDaysLeft += 1;
                            }
                            if(month < 1){
                              numDaysLeft += 31;
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
          if(numDaysLeft >= 2){
            document.body.innerHTML += '<br><p>There are ' + numDaysLeft + ' days left</p>';
          }
          else if(numDaysLeft == 1){
            var numMinutes = 59 - minutes;
            if(seconds == 0){
              numMinutes ++;
            }
            var numHours = 23 - hour;
            if(seconds == 0 && minutes == 0){
              numHours ++;
            }
            document.body.innerHTML += '<br><p>' + numHours + ' hours, ' + numMinutes + ' minutes, ' + (60 - seconds) + ' seconds remain</p>';
          }
        }
        else{
          var fraction = ((day-1) * 86400 + hour * 3600 + minutes * 60 + seconds) / 25956;
          if(year == 2021 && (day > 7 || day == 7 && hour >= 2)){
            fraction += (3600/25956);
          }
          else if(year == 2022 && (day > 6 || day == 6 && hour >= 2)){
            fraction += (3600/25956);
          }
          else if(year == 2023 && (day > 5 || day == 5 && hour >= 2)){
            fraction += (3600/25956);
          }
          document.body.innerHTML = '<h2>' + fraction.toFixed(4) + '% is over!</h2>'
          var numMinutes = 59 - minutes;
          if(seconds == 0){
            numMinutes ++;
          }
          document.body.innerHTML += '<br><p>' + (720 - Math.floor(fraction * 721)) + ' hours, ' + numMinutes + ' minutes, ' + (60 - seconds) + ' seconds remain</p>';
          
        }
        var x = Math.random() * 200 + 200;
        setTimeout(refreshData, x);
      }
      refreshData();
    </script>
  </body>
</html>
